# See https://docs.astral.sh/ruff/configuration/
# For a full list of supported rules, see https://docs.astral.sh/ruff/rules/
# For a full list of options, see https://docs.astral.sh/ruff/settings/

# Same as Black.
line-length = 100
# Assume Python 3.7+
target-version = "py37"

# The gRPC project has a lot of generated code.
# We exclude them here. This is based on black.toml
# and tools/distrib/ruff_code.sh
exclude = [
    ".bzr",
    ".direnv",
    ".eggs",
    ".git",
    ".hg",
    ".mypy_cache",
    ".nox",
    ".pants.d",
    ".ruff_cache",
    ".svn",
    ".tox",
    ".venv",
    "__pypackages__",
    "_build",
    "buck-out",
    "build",
    "dist",
    "node_modules",
    "venv",
    "site-packages",
    "test/cpp/naming/resolver_component_tests_runner.py",  # AUTO-GENERATED
    "grpc_version.py", # AUTO-GENERATED from a template
    "python_version.py", # AUTO-GENERATED from a template
    "src/python/grpcio/grpc_core_dependencies.py", # AUTO-GENERATED from a template
    "src/python/grpcio/grpc/_grpcio_metadata.py", # AUTO-GENERATED from a template
    "tools/distrib/python/grpcio_tools/protoc_lib_deps.py", # AUTO-GENERATED BY make_grpcio_tools.py
    "src/python/grpcio_observability/observability_lib_deps.py", # AUTO-GENERATED BY make_grpcio_observability.py
    ".*_pb2.py",  # autogenerated Protocol Buffer files
    ".*_pb2_grpc.py",  # autogenerated Protocol Buffer gRPC files
    "tools/distrib/python/xds_protos/.*" # AUTO-GENERATED By tools/distrib/python/xds_protos/build.py
]


[lint]
ignore = [
    "FA100", # Checks for missing from __future__ import annotations 
    # imports upon detecting type annotations that can be written more succinctly under PEP 563. 
    # only availabe in 3.9 and above, but we support 3.8 as well. 

    "TD003", # TD003 Missing issue link for this TODO 
    "FIX002", # Checks for "TODO" comments.
    "FIX004", # Checks for "HACK" comments.

    "ANN401", # Checks that function arguments are annotated with a more specific type than Any.

    "S105", # Checks for potential uses of hardcoded passwords in strings.

    "BLE001", # Checks for except clauses that catch all exceptions. This includes bare except, except BaseException and except Exception.
]

# Select all rules by default, and then ignore the ones we don't want.
# This is a good way to stay up-to-date with new rules in ruff.
select = ["ALL"]

# Allow unused variables that match these patterns.
dummy-variable-rgx = "^(_+|ignored_)"

[format]
# Like Black, use double quotes for strings.
quote-style = "double"
# Like Black, indent with 4 spaces.
indent-style = "space" 
